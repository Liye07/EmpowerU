@model Consumer

@{
    ViewData["Title"] = "Appointment Details";
    var pastAppointments = ViewBag.PastAppointments as List<EmpowerU.Models.Appointment>;
    var upcomingAppointments = ViewBag.UpcomingAppointments as List<EmpowerU.Models.Appointment>;
}

<div class="container">
    <h2>Appointments</h2>

    <div class="tab-buttons">
        <button id="past-btn" class="tab-btn" onclick="showPastAppointments()">Past</button>
        <button id="upcoming-btn" class="tab-btn active" onclick="showUpcomingAppointments()">Upcoming</button>
    </div>

    <table id="upcoming-appointments-table" class="appointments-table">
        <thead>
            <tr>
                <th>Appointment ID</th>
                <th>Business Name</th>
                <th>Date</th>
                <th>Service Type</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var appointment in upcomingAppointments)
            {
                <tr>
                    <td>@appointment.AppointmentID</td>
                    <td>@appointment.Business.Name</td>
                    <td>@appointment.DateTime.ToShortDateString()</td>
                    <td>@appointment.ServiceType</td>
                    <td>@appointment.Status</td>
                </tr>
            }
        </tbody>
    </table>

    <table id="past-appointments-table" class="appointments-table" style="display:none;">
        <thead>
            <tr>
                <th>Appointment ID</th>
                <th>Business Name</th>
                <th>Date</th>
                <th>Service Type</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var appointment in pastAppointments)
            {
                <tr>
                    <td>@appointment.AppointmentID</td>
                    <td>@appointment.Business.Name</td>
                    <td>@appointment.DateTime.ToShortDateString()</td>
                    <td>@appointment.ServiceType</td>
                    <td>@appointment.Status</td>
                </tr>
            }
        </tbody>
    </table>
</div>

<div class="appointment-details">
    <h3>APPOINTMENT DETAILS</h3>
    <p><strong>First Name: </strong>@Model.Name</p>
    <p><strong>Surname: </strong>@Model.Surname</p>
    <p><strong>Email: </strong>@Model.Email</p>
    <p><strong>Phone No.: </strong>@Model.PhoneNo</p>

    <button class="review-btn">Leave a Review</button>
</div>

@section Scripts {
    <script>
        function showPastAppointments() {
            document.getElementById('upcoming-appointments-table').style.display = 'none';
            document.getElementById('past-appointments-table').style.display = 'table';
            document.getElementById('past-btn').classList.add('active');
            document.getElementById('upcoming-btn').classList.remove('active');
        }

        function showUpcomingAppointments() {
            document.getElementById('upcoming-appointments-table').style.display = 'table';
            document.getElementById('past-appointments-table').style.display = 'none';
            document.getElementById('past-btn').classList.remove('active');
            document.getElementById('upcoming-btn').classList.add('active');
        }
    </script>
}

